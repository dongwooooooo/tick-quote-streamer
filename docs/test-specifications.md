# ν…μ¤νΈ μ½”λ“ μ‘μ„±μ„ μ„ν• μ„λΉ„μ¤λ³„ κΈ°λ¥λ…μ„Έμ„

## π“‹ ν…μ¤νΈ μ‘μ„± κ¶μ¥ μμ„

1. **Mock WebSocket Server** - κ°€μ¥ λ‹¨μν• κµ¬μ΅°
2. **Data Processor** - ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§
3. **Collector** - μ™Έλ¶€ μμ΅΄μ„±μ΄ λ§μ
4. **SSE Streamer** - μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ° λ΅μ§
5. **Notification Service** - λ³µμ΅ν• λΉ„μ¦λ‹μ¤ κ·μΉ™
6. **Integration Tests** - μ „μ²΄ μ‹μ¤ν… ν†µν•©

---

## 1. Mock WebSocket Server ν…μ¤νΈ λ…μ„Έ

### π“ μ„λΉ„μ¤ κ°μ”
- **λ©μ **: KIS API WebSocket μ„λ²„ μ‹λ®¬λ μ΄μ…
- **ν¬νΈ**: 8090
- **μ£Όμ” κΈ°λ¥**: μ‹¤μ‹κ°„ μ£Όμ‹ λ°μ΄ν„° μƒμ„± λ° WebSocket μ „μ†΅

### π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

#### A. KisWebSocketHandler
```java
// μ„μΉ: mock-websocket/src/main/java/.../handler/KisWebSocketHandler.java
// μ—­ν• : WebSocket μ—°κ²° λ° λ©”μ‹μ§€ μ²λ¦¬
```

**μ£Όμ” λ©”μ„λ“:**
- `afterConnectionEstablished()`: μ—°κ²° μƒμ„±
- `afterConnectionClosed()`: μ—°κ²° μΆ…λ£
- `handleTextMessage()`: κµ¬λ… μ”μ²­ μ²λ¦¬
- `sendQuoteData()`: μ£Όμ‹ λ°μ΄ν„° μ „μ†΅
- `sendOrderbookData()`: νΈκ°€ λ°μ΄ν„° μ „μ†΅

#### B. MockDataService
```java
// μ„μΉ: mock-websocket/src/main/java/.../service/MockDataService.java
// μ—­ν• : κ°€μ§ μ£Όμ‹ λ°μ΄ν„° μƒμ„±
```

**μ£Όμ” λ©”μ„λ“:**
- `generateQuoteData()`: μ‹μ„Έ λ°μ΄ν„° μƒμ„±
- `generateOrderbookData()`: νΈκ°€ λ°μ΄ν„° μƒμ„±

### π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### 1. WebSocket μ—°κ²° ν…μ¤νΈ
```java
@Test
void testWebSocketConnection() {
    // Given: WebSocket ν΄λΌμ΄μ–ΈνΈ μƒμ„±
    // When: μ„λ²„μ— μ—°κ²° μ‹λ„
    // Then: μ—°κ²° μ„±κ³µ ν™•μΈ
}
```

#### 2. κµ¬λ… λ©”μ‹μ§€ μ²λ¦¬ ν…μ¤νΈ
```java
@Test
void testSubscriptionRequest() {
    // Given: μ ν¨ν• κµ¬λ… μ”μ²­ λ©”μ‹μ§€
    // When: λ©”μ‹μ§€ μ „μ†΅
    // Then: κµ¬λ… μ„±κ³µ μ‘λ‹µ ν™•μΈ
}
```

#### 3. λ°μ΄ν„° μƒμ„± ν…μ¤νΈ
```java
@Test
void testDataGeneration() {
    // Given: μΆ…λ© μ½”λ“
    // When: λ°μ΄ν„° μƒμ„± μ”μ²­
    // Then: KIS API ν•μ‹μ λ°μ΄ν„° λ°ν™ ν™•μΈ
}
```

### π« μ—£μ§€ μΌ€μ΄μ¤

1. **μλ»λ κµ¬λ… λ©”μ‹μ§€**: ν•μ‹ μ¤λ¥, ν•„μ ν•„λ“ λ„λ½
2. **μ΅΄μ¬ν•μ§€ μ•λ” μΆ…λ©**: λ―Έλ“±λ΅ μΆ…λ© μ½”λ“ μ”μ²­
3. **λ™μ‹ λ‹¤μ¤‘ μ—°κ²°**: μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ λ™μ‹ μ ‘μ†
4. **μ—°κ²° μ¤‘λ‹¨**: ν΄λΌμ΄μ–ΈνΈ κ°‘μ‘μ¤λ° μ—°κ²° μΆ…λ£
5. **λ©”μ‹μ§€ μ „μ†΅ μ‹¤ν¨**: λ„¤νΈμ›ν¬ μ¤λ¥ μ‹λ®¬λ μ΄μ…

### π“ κ²€μ¦ ν¬μΈνΈ

- WebSocket μ—°κ²° μƒνƒ κ΄€λ¦¬
- λ©”μ‹μ§€ ν•μ‹ κ²€μ¦ (KIS API μ¤ν™ μ¤€μ)
- λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›
- λ©”λ¨λ¦¬ λ¦¬μ†μ¤ κ΄€λ¦¬ (μ„Έμ… μ •λ¦¬)
- μ¤λ¥ μƒν™© μ²λ¦¬

---

## 2. Data Processor ν…μ¤νΈ λ…μ„Έ

### π“ μ„λΉ„μ¤ κ°μ”
- **λ©μ **: Kafka λ©”μ‹μ§€ μ†λΉ„ λ° λ°μ΄ν„°λ² μ΄μ¤ μ €μ¥
- **ν¬νΈ**: 8082
- **μ£Όμ” κΈ°λ¥**: μ‹¤μ‹κ°„ λ°μ΄ν„° μ²λ¦¬ λ° μΊμ‹±

### π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

#### A. QuoteStreamConsumer
```java
// μ„μΉ: data-processor/src/main/java/.../consumer/QuoteStreamConsumer.java
// μ—­ν• : quote-stream ν† ν”½ λ©”μ‹μ§€ μ†λΉ„
```

**μ£Όμ” λ©”μ„λ“:**
- `handleQuoteMessage()`: λ©”μ‹μ§€ μ²λ¦¬
- `acknowledgeMessage()`: μλ™ ACK

#### B. QuoteDataService
```java
// μ„μΉ: data-processor/src/main/java/.../service/QuoteDataService.java
// μ—­ν• : λΉ„μ¦λ‹μ¤ λ΅μ§ μ²λ¦¬
```

**μ£Όμ” λ©”μ„λ“:**
- `processQuoteData()`: λ°μ΄ν„° μ²λ¦¬ λ΅μ§
- `saveQuoteData()`: λ°μ΄ν„°λ² μ΄μ¤ μ €μ¥
- `updateCache()`: μΊμ‹ μ—…λ°μ΄νΈ
- `checkDuplicate()`: μ¤‘λ³µ λ°μ΄ν„° κ²€μ‚¬

#### C. Entity & Repository
```java
// QuoteData, Orderbook, OrderbookLevel μ—”ν‹°ν‹°
// QuoteDataRepository, OrderbookRepository λ“±
```

### π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### 1. Kafka λ©”μ‹μ§€ μ†λΉ„ ν…μ¤νΈ
```java
@Test
void testKafkaMessageConsumption() {
    // Given: μ ν¨ν• Kafka λ©”μ‹μ§€
    // When: λ©”μ‹μ§€ μ†λΉ„
    // Then: μ •μƒ μ²λ¦¬ λ° ACK ν™•μΈ
}
```

#### 2. λ°μ΄ν„° μ €μ¥ ν…μ¤νΈ
```java
@Test
void testDataSaving() {
    // Given: νμ‹±λ μ£Όμ‹ λ°μ΄ν„°
    // When: μ €μ¥ λ΅μ§ μ‹¤ν–‰
    // Then: λ°μ΄ν„°λ² μ΄μ¤μ— μ •ν™•ν μ €μ¥λ¨ ν™•μΈ
}
```

#### 3. μΊμ‹ μ—…λ°μ΄νΈ ν…μ¤νΈ
```java
@Test
void testCacheUpdate() {
    // Given: μƒλ΅μ΄ μ£Όμ‹ λ°μ΄ν„°
    // When: μΊμ‹ μ—…λ°μ΄νΈ
    // Then: μµμ‹  λ°μ΄ν„°λ΅ μΊμ‹ κ°±μ‹  ν™•μΈ
}
```

#### 4. μ¤‘λ³µ λ°μ΄ν„° μ²λ¦¬ ν…μ¤νΈ
```java
@Test
void testDuplicateDataHandling() {
    // Given: λ™μΌν• sequence_number λ°μ΄ν„°
    // When: μ¤‘λ³µ λ°μ΄ν„° μ²λ¦¬
    // Then: μ¤‘λ³µ μ €μ¥ λ°©μ§€ ν™•μΈ
}
```

### π« μ—£μ§€ μΌ€μ΄μ¤

1. **μλ»λ JSON ν•μ‹**: νμ‹± λ¶κ°€λ¥ν• λ©”μ‹μ§€
2. **ν•„μ ν•„λ“ λ„λ½**: stock_code, price λ“± λ„λ½
3. **λ°μ΄ν„° νƒ€μ… μ¤λ¥**: μ«μ ν•„λ“μ— λ¬Έμμ—΄
4. **λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ‹¤ν¨**: DB λ‹¤μ΄ μƒν™©
5. **λ©”λ¨λ¦¬ λ¶€μ΅±**: λ€λ‰ λ°μ΄ν„° μ²λ¦¬ μ‹
6. **νΈλμ­μ… λ΅¤λ°±**: μ €μ¥ μ¤‘ μ¤λ¥ λ°μƒ
7. **Kafka μ—°κ²° λκΉ€**: λ„¤νΈμ›ν¬ μ¥μ• 
8. **μΊμ‹ λ§λ£**: TTL μ΄κ³Ό μƒν™©

### π“ κ²€μ¦ ν¬μΈνΈ

- λ©”μ‹μ§€ νμ‹± μ •ν™•μ„±
- λ°μ΄ν„° λ¬΄κ²°μ„± (μ μ•½μ΅°κ±΄ κ²€μ‚¬)
- νΈλμ­μ… μ²λ¦¬ (ACID λ³΄μ¥)
- μΊμ‹ μΌκ΄€μ„±
- μ¤λ¥ λ³µκµ¬ λ©”μ»¤λ‹μ¦
- μ„±λ¥ (μ²λ¦¬ μ‹κ°„, λ©”λ¨λ¦¬ μ‚¬μ©λ‰)

---

## 3. Collector ν…μ¤νΈ λ…μ„Έ

### π“ μ„λΉ„μ¤ κ°μ”
- **λ©μ **: WebSocketμΌλ΅ λ°μ΄ν„° μμ§‘ ν›„ Kafka μ „μ†΅
- **ν¬νΈ**: 8081
- **μ£Όμ” κΈ°λ¥**: μ™Έλ¶€ API μ—°λ™ λ° λ©”μ‹μ§€ λΈλ΅μ»¤ μ—­ν• 

### π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

#### A. KisWebSocketClient
```java
// μ„μΉ: collector/src/main/java/.../client/KisWebSocketClient.java
// μ—­ν• : WebSocket ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
```

**μ£Όμ” λ©”μ„λ“:**
- `connect()`: WebSocket μ—°κ²°
- `subscribeToQuote()`: μ£Όμ‹ κµ¬λ…
- `subscribeToOrderbook()`: νΈκ°€ κµ¬λ…
- `handleMessage()`: λ©”μ‹μ§€ μ²λ¦¬
- `scheduleReconnect()`: μ¬μ—°κ²° λ΅μ§

#### B. KafkaProducerService
```java
// μ„μΉ: collector/src/main/java/.../service/KafkaProducerService.java
// μ—­ν• : Kafka λ©”μ‹μ§€ μ „μ†΅
```

**μ£Όμ” λ©”μ„λ“:**
- `sendQuoteMessage()`: μ£Όμ‹ λ°μ΄ν„° μ „μ†΅
- `sendOrderbookMessage()`: νΈκ°€ λ°μ΄ν„° μ „μ†΅

#### C. Message DTOs
```java
// KisQuoteData, KisOrderbookData λ“±
// λ©”μ‹μ§€ νμ‹± λ° λ³€ν™ λ‹΄λ‹Ή
```

### π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### 1. WebSocket μ—°κ²° ν…μ¤νΈ
```java
@Test
void testWebSocketConnection() {
    // Given: Mock WebSocket μ„λ²„
    // When: μ—°κ²° μ‹λ„
    // Then: μ—°κ²° μ„±κ³µ λ° μƒνƒ ν™•μΈ
}
```

#### 2. λ©”μ‹μ§€ νμ‹± ν…μ¤νΈ
```java
@Test
void testMessageParsing() {
    // Given: KIS API ν•μ‹ λ©”μ‹μ§€
    // When: λ©”μ‹μ§€ νμ‹±
    // Then: μ¬λ°”λ¥Έ DTO κ°μ²΄ μƒμ„± ν™•μΈ
}
```

#### 3. Kafka μ „μ†΅ ν…μ¤νΈ
```java
@Test
void testKafkaMessageSending() {
    // Given: νμ‹±λ λ°μ΄ν„°
    // When: Kafka μ „μ†΅
    // Then: λ©”μ‹μ§€ μ •μƒ μ „μ†΅ ν™•μΈ
}
```

#### 4. μ¬μ—°κ²° λ΅μ§ ν…μ¤νΈ
```java
@Test
void testReconnectionLogic() {
    // Given: WebSocket μ—°κ²° λκΉ€
    // When: μ¬μ—°κ²° μ‹λ„
    // Then: μλ™ μ¬μ—°κ²° μ„±κ³µ ν™•μΈ
}
```

### π« μ—£μ§€ μΌ€μ΄μ¤

1. **WebSocket μ—°κ²° μ‹¤ν¨**: μ„λ²„ λ‹¤μ΄, λ„¤νΈμ›ν¬ μ¤λ¥
2. **μΈμ¦ μ‹¤ν¨**: μλ»λ API ν‚¤
3. **λ©”μ‹μ§€ ν•μ‹ μ¤λ¥**: μμƒκ³Ό λ‹¤λ¥Έ λ°μ΄ν„° ν•μ‹
4. **Kafka μ „μ†΅ μ‹¤ν¨**: λΈλ΅μ»¤ λ‹¤μ΄, ν† ν”½ μ—†μ
5. **SSL μΈμ¦μ„ μ¤λ¥**: HTTPS μ—°κ²° λ¬Έμ 
6. **λ©”λ¨λ¦¬ λ„μ**: μ¥μ‹κ°„ μ‹¤ν–‰ μ‹ λ¦¬μ†μ¤ λ„μ 
7. **μ¤λ λ“ λ°λ“λ½**: λ™μ‹μ„± λ¬Έμ 
8. **λ°±ν”„λ μ…”**: μ²λ¦¬ μ†λ„λ³΄λ‹¤ λΉ λ¥Έ λ°μ΄ν„° μ μ…

### π“ κ²€μ¦ ν¬μΈνΈ

- WebSocket μƒλ…μ£ΌκΈ° κ΄€λ¦¬
- λ©”μ‹μ§€ νμ‹± μ •ν™•μ„±
- Kafka νν‹°μ…”λ‹ μ „λµ (μΆ…λ©λ³„)
- μ¤λ¥ λ³µκµ¬ λ° μ¬μ‹λ„ λ΅μ§
- μ„±λ¥ λ° μ²λ¦¬λ‰
- λ¦¬μ†μ¤ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§

---

## 4. SSE Streamer ν…μ¤νΈ λ…μ„Έ

### π“ μ„λΉ„μ¤ κ°μ”
- **λ©μ **: ν΄λΌμ΄μ–ΈνΈμ—κ² μ‹¤μ‹κ°„ λ°μ΄ν„° μ¤νΈλ¦¬λ°
- **ν¬νΈ**: 8083
- **μ£Όμ” κΈ°λ¥**: Server-Sent Eventsλ¥Ό ν†µν• μ‹¤μ‹κ°„ λ°μ΄ν„° μ „μ†΅

### π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

#### A. SseStreamController
```java
// μ„μΉ: sse-streamer/src/main/java/.../controller/SseStreamController.java
// μ—­ν• : SSE μ—°κ²° κ΄€λ¦¬
```

**μ£Όμ” λ©”μ„λ“:**
- `connect()`: SSE μ—°κ²° μƒμ„±
- `disconnect()`: μ—°κ²° μΆ…λ£
- `getStatus()`: μ—°κ²° μƒνƒ μ΅°ν

#### B. SseConnectionManager
```java
// μ„μΉ: sse-streamer/src/main/java/.../service/SseConnectionManager.java
// μ—­ν• : μ—°κ²° κ΄€λ¦¬ λ° λΈλ΅λ“μΊμ¤νΈ
```

**μ£Όμ” λ©”μ„λ“:**
- `addConnection()`: μ—°κ²° μ¶”κ°€
- `removeConnection()`: μ—°κ²° μ κ±°
- `broadcastToSubscribers()`: κµ¬λ…μμ—κ² λΈλ΅λ“μΊμ¤νΈ
- `sendHeartbeat()`: ν•νΈλΉ„νΈ μ „μ†΅

#### C. StreamDataService
```java
// μ—­ν• : Kafka λ©”μ‹μ§€λ¥Ό SSEλ΅ λ³€ν™
```

### π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### 1. SSE μ—°κ²° ν…μ¤νΈ
```java
@Test
void testSseConnection() {
    // Given: SSE ν΄λΌμ΄μ–ΈνΈ
    // When: μ—°κ²° μ”μ²­
    // Then: μ—°κ²° μ„±κ³µ λ° μ¤νΈλ¦Ό μ‹μ‘ ν™•μΈ
}
```

#### 2. κµ¬λ… κ΄€λ¦¬ ν…μ¤νΈ
```java
@Test
void testSubscriptionManagement() {
    // Given: νΉμ • μΆ…λ© κµ¬λ… μ”μ²­
    // When: κµ¬λ… μ²λ¦¬
    // Then: ν•΄λ‹Ή μΆ…λ© λ°μ΄ν„°λ§ μμ‹  ν™•μΈ
}
```

#### 3. λΈλ΅λ“μΊμ¤νΈ ν…μ¤νΈ
```java
@Test
void testBroadcast() {
    // Given: μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈ μ—°κ²°
    // When: λ°μ΄ν„° λΈλ΅λ“μΊμ¤νΈ
    // Then: λ¨λ“  κµ¬λ…μμ—κ² μ „μ†΅ ν™•μΈ
}
```

#### 4. μ—°κ²° μ •λ¦¬ ν…μ¤νΈ
```java
@Test
void testConnectionCleanup() {
    // Given: λΉ„μ •μƒ μΆ…λ£λ μ—°κ²°
    // When: μ •λ¦¬ μ‘μ—… μ‹¤ν–‰
    // Then: λ©”λ¨λ¦¬ λ„μ μ—†μ΄ μ •λ¦¬ ν™•μΈ
}
```

### π« μ—£μ§€ μΌ€μ΄μ¤

1. **ν΄λΌμ΄μ–ΈνΈ κ°‘μ‘μ¤λ° μ—°κ²° μΆ…λ£**: λ„¤νΈμ›ν¬ λκΉ€
2. **λ€λ‰ λ™μ‹ μ—°κ²°**: λ¶€ν• ν…μ¤νΈ
3. **λλ¦° ν΄λΌμ΄μ–ΈνΈ**: λ°μ΄ν„° μ†λΉ„ μ†λ„ μ§€μ—°
4. **λ©”λ¨λ¦¬ λ¶€μ΅±**: λ€λ‰ μ—°κ²° μ‹ λ¦¬μ†μ¤ λ¶€μ΅±
5. **μλ»λ κµ¬λ… μ”μ²­**: μ΅΄μ¬ν•μ§€ μ•λ” μΆ…λ©
6. **μ¤‘λ³µ μ—°κ²°**: κ°™μ€ ν΄λΌμ΄μ–ΈνΈμ μ—¬λ¬ μ—°κ²°
7. **νƒ€μ„μ•„μ›ƒ**: μ¥μ‹κ°„ λΉ„ν™μ„± μ—°κ²°
8. **λ°±ν”„λ μ…”**: ν΄λΌμ΄μ–ΈνΈ μ²λ¦¬ μ§€μ—°

### π“ κ²€μ¦ ν¬μΈνΈ

- SSE ν”„λ΅ν† μ½ μ¤€μ
- μ—°κ²° μƒνƒ κ΄€λ¦¬
- λ©”λ¨λ¦¬ ν¨μ¨μ„±
- μ‹¤μ‹κ°„ μ„±λ¥ (μ§€μ—°μ‹κ°„)
- ν΄λΌμ΄μ–ΈνΈλ³„ ν•„ν„°λ§ μ •ν™•μ„±
- μ¥μ•  λ³µκµ¬ λ©”μ»¤λ‹μ¦

---

## 5. Notification Service ν…μ¤νΈ λ…μ„Έ

### π“ μ„λΉ„μ¤ κ°μ”
- **λ©μ **: μ•λ¦Ό μ΅°κ±΄ κ΄€λ¦¬ λ° μ‹¤μ‹κ°„ μ•λ¦Ό λ°μ†΅
- **ν¬νΈ**: 8084
- **μ£Όμ” κΈ°λ¥**: μ΅°κ±΄λ¶€ μ•λ¦Ό μ‹μ¤ν…

### π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

#### A. NotificationController
```java
// μ„μΉ: notification-service/src/main/java/.../controller/NotificationController.java
// μ—­ν• : μ•λ¦Ό μ΅°κ±΄ CRUD API
```

#### B. ConditionEvaluationService
```java
// μ„μΉ: notification-service/src/main/java/.../service/ConditionEvaluationService.java
// μ—­ν• : μ•λ¦Ό μ΅°κ±΄ ν‰κ°€
```

**μ£Όμ” λ©”μ„λ“:**
- `evaluateConditions()`: μ΅°κ±΄ ν‰κ°€
- `triggerNotification()`: μ•λ¦Ό νΈλ¦¬κ±°
- `isConditionMet()`: μ΅°κ±΄ μ¶©μ΅± ν™•μΈ

#### C. NotificationDeliveryService
```java
// μ—­ν• : μ‹¤μ  μ•λ¦Ό μ „μ†΅
```

### π§ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### 1. μ΅°κ±΄ λ“±λ΅ ν…μ¤νΈ
```java
@Test
void testConditionCreation() {
    // Given: μ ν¨ν• μ•λ¦Ό μ΅°κ±΄
    // When: μ΅°κ±΄ λ“±λ΅
    // Then: λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ ν™•μΈ
}
```

#### 2. μ΅°κ±΄ ν‰κ°€ ν…μ¤νΈ
```java
@Test
void testConditionEvaluation() {
    // Given: λ“±λ΅λ μ΅°κ±΄κ³Ό μ‹¤μ‹κ°„ λ°μ΄ν„°
    // When: μ΅°κ±΄ ν‰κ°€ μ‹¤ν–‰
    // Then: μ¬λ°”λ¥Έ νμ • κ²°κ³Ό ν™•μΈ
}
```

#### 3. μ•λ¦Ό λ°μ†΅ ν…μ¤νΈ
```java
@Test
void testNotificationDelivery() {
    // Given: νΈλ¦¬κ±°λ μ•λ¦Ό
    // When: μ•λ¦Ό λ°μ†΅
    // Then: μ„±κ³µμ μΈ μ „μ†΅ ν™•μΈ
}
```

#### 4. μ¬μ‹λ„ λ΅μ§ ν…μ¤νΈ
```java
@Test
void testRetryMechanism() {
    // Given: μ „μ†΅ μ‹¤ν¨ν• μ•λ¦Ό
    // When: μ¬μ‹λ„ μ‹¤ν–‰
    // Then: μ„¤μ •λ νμλ§νΌ μ¬μ‹λ„ ν™•μΈ
}
```

### π« μ—£μ§€ μΌ€μ΄μ¤

1. **μλ»λ μ΅°κ±΄μ‹**: λ¬Έλ²• μ¤λ¥, λ…Όλ¦¬μ  λ¨μ
2. **μ¤‘λ³µ μ΅°κ±΄**: λ™μΌν• μ΅°κ±΄μ μ¤‘λ³µ λ“±λ΅
3. **λ§λ£λ μ΅°κ±΄**: λΉ„ν™μ„±ν™”λ μ΅°κ±΄ μ²λ¦¬
4. **λ€λ‰ μ΅°κ±΄**: μλ§ κ°μ μ΅°κ±΄ λ™μ‹ ν‰κ°€
5. **μ•λ¦Ό μ „μ†΅ μ‹¤ν¨**: μ™Έλ¶€ μ„λΉ„μ¤ μ¥μ• 
6. **λ°μ΄ν„° μ§€μ—°**: μ‹¤μ‹κ°„ λ°μ΄ν„° μ§€μ—° μ‹ μ²λ¦¬
7. **λ™μ‹ νΈλ¦¬κ±°**: κ°™μ€ μ΅°κ±΄μ λ™μ‹ νΈλ¦¬κ±°
8. **λ©”λ¨λ¦¬ λ¶€μ΅±**: λ€λ‰ μ•λ¦Ό λ€κΈ°μ—΄

### π“ κ²€μ¦ ν¬μΈνΈ

- μ΅°κ±΄ ν‰κ°€ μ •ν™•μ„±
- μ•λ¦Ό μ „μ†΅ μ‹ λΆ°μ„±
- μ„±λ¥ (λ€λ‰ μ΅°κ±΄ μ²λ¦¬)
- μ¤‘λ³µ μ•λ¦Ό λ°©μ§€
- μ¤λ¥ μ²λ¦¬ λ° λ³µκµ¬
- μ•λ¦Ό μ΄λ ¥ κ΄€λ¦¬

---

## 6. Integration Test λ…μ„Έ

### π“ ν†µν•© ν…μ¤νΈ κ°μ”
- **λ©μ **: μ „μ²΄ μ‹μ¤ν… end-to-end κ²€μ¦
- **λ²”μ„**: λ¨λ“  μ„λΉ„μ¤ κ°„ μƒνΈμ‘μ©

### π§ μ£Όμ” μ‹λ‚λ¦¬μ¤

#### 1. μ „μ²΄ λ°μ΄ν„° ν”λ΅μ° ν…μ¤νΈ
```java
@Test
void testEndToEndDataFlow() {
    // Given: λ¨λ“  μ„λΉ„μ¤ μ‹¤ν–‰ μƒνƒ
    // When: Mock μ„λ²„μ—μ„ λ°μ΄ν„° μƒμ„±
    // Then: SSE ν΄λΌμ΄μ–ΈνΈκΉμ§€ λ°μ΄ν„° λ„λ‹¬ ν™•μΈ
}
```

#### 2. μ•λ¦Ό μ‹μ¤ν… ν†µν•© ν…μ¤νΈ
```java
@Test
void testNotificationFlow() {
    // Given: μ•λ¦Ό μ΅°κ±΄ μ„¤μ •
    // When: μ΅°κ±΄μ„ λ§μ΅±ν•λ” λ°μ΄ν„° λ°μƒ
    // Then: μ•λ¦Ό λ°μ†΅κΉμ§€ μ™„λ£ ν™•μΈ
}
```

#### 3. μ¥μ•  λ³µκµ¬ ν…μ¤νΈ
```java
@Test
void testFailureRecovery() {
    // Given: μΌλ¶€ μ„λΉ„μ¤ λ‹¤μ΄
    // When: μ„λΉ„μ¤ λ³µκµ¬
    // Then: μ‹μ¤ν… μ •μƒν™” ν™•μΈ
}
```

### π« ν†µν•© ν…μ¤νΈ μ—£μ§€ μΌ€μ΄μ¤

1. **μ„λΉ„μ¤ μμ°¨ μ¬μ‹μ‘**: μμ΅΄μ„± μμ„ ν™•μΈ
2. **λ„¤νΈμ›ν¬ λ¶„ν• **: μΌλ¶€ μ„λΉ„μ¤ κ°„ ν†µμ‹  λ‹¨μ 
3. **λ°μ΄ν„° μΌκ΄€μ„±**: μ—¬λ¬ μ„λΉ„μ¤ κ°„ λ°μ΄ν„° λ™κΈ°ν™”
4. **λ¶€ν• ν…μ¤νΈ**: μ „μ²΄ μ‹μ¤ν… μ²λ¦¬ ν•κ³„
5. **λ©”λ¨λ¦¬ λ„μ**: μ¥μ‹κ°„ μ‹¤ν–‰ μ‹ λ¦¬μ†μ¤ κ΄€λ¦¬

---

## π“ ν…μ¤νΈ μ‘μ„± κ°€μ΄λ“λΌμΈ

### π”§ κ¶μ¥ ν…μ¤νΈ λ„κµ¬

- **Unit Tests**: JUnit 5, Mockito
- **Integration Tests**: Spring Boot Test, TestContainers
- **WebSocket Tests**: Spring WebSocket Test
- **Kafka Tests**: EmbeddedKafka, TestContainers
- **Database Tests**: H2, TestContainers MySQL

### π“ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ λ©ν‘

- **Unit Test**: 80% μ΄μƒ
- **Integration Test**: μ£Όμ” ν”λ΅μ° 100%
- **Edge Cases**: μ¤‘μ” λΉ„μ¦λ‹μ¤ λ΅μ§ 100%

### π― ν…μ¤νΈ μ‘μ„± μ°μ„ μμ„

1. **ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§** (λ°μ΄ν„° μ²λ¦¬, μ΅°κ±΄ ν‰κ°€)
2. **μ™Έλ¶€ μμ΅΄μ„±** (Kafka, WebSocket, Database)
3. **μ¤λ¥ μ²λ¦¬** (μ¬μ‹λ„, λ³µκµ¬ λ©”μ»¤λ‹μ¦)
4. **μ„±λ¥ μ„κ³„μ ** (μ²λ¦¬λ‰, μ‘λ‹µμ‹κ°„)
5. **λ³΄μ• λ° κ²€μ¦** (μ…λ ¥ μ ν¨μ„±, κ¶ν•)

μ΄ λ…μ„Έμ„λ¥Ό λ°”νƒ•μΌλ΅ μ²΄κ³„μ μΈ ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•μ‹λ©΄ λ©λ‹λ‹¤! μ–΄λ–¤ μ„λΉ„μ¤λ¶€ν„° ν…μ¤νΈλ¥Ό μ‹μ‘ν•μ‹κ² μ–΄μ”?
